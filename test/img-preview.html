<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="./jquery-1.11.1.js"></script>
    <script type="text/javascript">
    /** 
     * 从 file 域获取 本地图片 url 
     */



    function getFileUrl(sourceId) {
        var url;
        if (navigator.userAgent.indexOf("MSIE") >= 1) { // IE 
            url = document.getElementById(sourceId).value;
        } else if (navigator.userAgent.indexOf("Firefox") > 0) { // Firefox 
            url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0));
        } else if (navigator.userAgent.indexOf("Chrome") > 0) { // Chrome 
            url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0));
        }
        return url;
    }

    // function getFileUrl(sourceClass) {
    //         var url;
    //         if (navigator.userAgent.indexOf("MSIE") >= 1) { // IE 
    //             url = document.getElementsByClassName(sourceClass)[0].value;
    //         } else if (navigator.userAgent.indexOf("Firefox") > 0) { // Firefox 
    //             url = window.URL.createObjectURL(document.getElementsByClassName(sourceClass)[0].files.item(0));
    //         } else if (navigator.userAgent.indexOf("Chrome") > 0) { // Chrome 
    //             url = window.URL.createObjectURL(document.getElementsByClassName(sourceClass)[0].files.item(0));
    //         }
    //         return url;
    //     }

    /** 
     * 将本地图片 显示到浏览器上 
     */
    function preImg(sourceClass, targetClass) {
        var urls = getFileUrl(sourceClass);
        var imgPre = document.getElementsByClassName(targetClass);
        console.log("ggg");
        console.log(urls);
        // imgPre.src = url;
    }


    $(function(){
        var fileList = [];
        $('.file-item').change(function(){
            var url = getFileUrl($(this).attr("id"));
            fileList.push(url);
            console.log(fileList);

            //对fileList做遍历，并将对应图片显示
            $.each(fileList, function(index, value){
                var str = "<li><img src='" + value + "'/></li>";
                var $li = $(str);
                $('#img-list').append($li);
            })
        });
    });
    </script>
</head>

<body>
    <form action="">
        <!-- <input type="file" name="img2" class="file-item" id="src1" onchange="preImg(this.id,'imgPre');"/>
        <input type="file" name="img1" class="file-item" id="src2" onchange="preImg(this.id,'imgPre');"/> -->
        <input type="file" name="img2" class="file-item" id="src1"/>
        <input type="file" name="img1" class="file-item" id="src2"/>
        <!-- <img class="imgPre" src="" width="300px" height="300px" style="display: block;" />
        <img class="imgPre" src="" width="300px" height="300px" style="display: block;" /> -->
    </form>
    <ul id="img-list"></ul>
</body>

</html>