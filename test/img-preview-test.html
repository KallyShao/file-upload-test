<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<html> 
<head> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<script src="jquery-1.11.1.js"></script>
<script type="text/javascript"> 
/** 
* 从 file 域获取 本地图片 url 
*/ 
function getFileUrl(sourceId) { 
    var url; 
    if (navigator.userAgent.indexOf("MSIE")>=1) { // IE 
    url = document.getElementById(sourceId).value; 
    } else if(navigator.userAgent.indexOf("Firefox")>0) { // Firefox 
    url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0)); 
    } else if(navigator.userAgent.indexOf("Chrome")>0) { // Chrome 
    url = window.URL.createObjectURL(document.getElementById(sourceId).files.item(0)); 
    } 
    return url; 
} 

/** 
* 将本地图片 显示到浏览器上 
*/ 
function preImg(sourceId, targetId) { 
    var url = getFileUrl(sourceId); 
    var imgPre = document.getElementById(targetId); 
    imgPre.src = url; 
} 

$(function(){
    var num = 0;
    $('#submit').click(function(){
        num++;
        if(num >= 5){
            alert('最多上传4张子图！')
            return;
        }
        var ele = "<li class='img-wrap'><input type='file' name='sub-img[]' class='sub-img-item' id='sub-img-" + num + "'></li>";
        $('#img-list').append(ele);

        $('#sub-img-' + num).click();
        var ch =  $('#img-list').children();
        console.log(ch.length);
      
    })

})
</script> 
</head> 
<body> 
<form action=""> 
<!-- <input type="file" name="imgOne" id="imgOne" onchange="preImg(this.id,'imgPre');" />  -->
<div class="form-group">
    <ul id="img-list">
        
    </ul>
</div>
</form> 
<button id="submit">上传文件</button>
</body> 
</html> 